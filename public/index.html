<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>My Game Library</title>
    <!--
        Main SPA shell for the Video Game Database app.
        This file contains the static structure: header, tabs, controls, display grid,
        and modal dialogs. JavaScript in `/js/app.js` will wire up behavior.
        The UI uses a dark theme provided by `/css/style.css`.
    -->
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <!-- App container -->
    <div id="app" class="app-root">
        <!-- Header with title, search and action buttons -->
        <header class="app-header">
            <div class="title-area">
                <h1 id="app-title">My Game Library</h1>
                <p class="subtitle">A personal catalog for the games you love</p>
            </div>

            <div class="header-controls">
                <!-- Search bar: JS will wire this to filter results -->
                <input id="search-input" class="search-input" type="search" placeholder="Search for games, platforms, genres..." aria-label="Search" />

                <!-- Primary action buttons -->
                <div class="button-group">
                    <button id="btn-add-game" class="btn btn-primary">Add Game</button>
                    <button id="btn-add-platform" class="btn">Add Platform</button>
                    <button id="btn-import-csv" class="btn">Import from CSV</button>
                </div>
            </div>
        </header>

        <!-- Main area containing tabs, controls and display grid -->
        <main class="main-area">
            <!-- Tabs -->
            <nav class="tabs" role="tablist">
                <button class="tab active" data-tab="games" role="tab" aria-selected="true">Games</button>
                <button class="tab" data-tab="platforms" role="tab" aria-selected="false">Platforms</button>
            </nav>

            <!-- Controls bar: sorting + filtering -->
            <section class="controls-bar">
                <div class="left-controls">
                    <label for="sort-select">Sort by:</label>
                    <select id="sort-select">
                        <option value="name_asc">Name (A-Z)</option>
                        <option value="name_desc">Name (Z-A)</option>
                        <option value="year_desc">Release Year (Newest)</option>
                        <option value="year_asc">Release Year (Oldest)</option>
                    </select>
                </div>

                <div class="right-controls">
                    <span class="filter-label">Filter by Platform:</span>
                    <div class="platform-filters">
                        <!-- These are placeholders; JS should populate actual platform list -->
                        <button class="filter-btn active" data-platform="all">All</button>
                        <button class="filter-btn" data-platform="Steam">Steam</button>
                        <button class="filter-btn" data-platform="PS5">PS5</button>
                        <button class="filter-btn" data-platform="Switch">Switch</button>
                    </div>
                </div>
            </section>

            <!-- Display grid: cards will be rendered here via JS. We include template examples -->
            <section id="display-grid" class="display-grid" aria-live="polite">
                <!-- Example Game Card (serves as a visual/template sample). JS should clone a template instead of relying on this static one. -->
                <article class="card game-card example">
                    <img class="card-cover" src="/img/cover_placeholder.svg" alt="Game cover placeholder">
                    <div class="card-body">
                        <h3 class="card-title">Cyberpunk 2077</h3>
                        <p class="card-desc">A story-driven, open world RPG set in Night City.</p>
                        <div class="platform-icons">
                            <span class="plat">Steam</span>
                            <span class="plat">GOG</span>
                        </div>
                        <div class="card-actions">
                            <button class="btn btn-sm edit-game">Edit</button>
                        </div>
                    </div>
                </article>

                <!-- Example Platform Card -->
                <article class="card platform-card example">
                    <img class="card-cover" src="/img/icon_placeholder.svg" alt="Platform logo placeholder">
                    <div class="card-body">
                        <h3 class="card-title">Steam</h3>
                        <p class="card-desc">Digital â€¢ 52 games</p>
                        <div class="card-actions">
                            <button class="btn btn-sm edit-platform">Edit</button>
                        </div>
                    </div>
                </article>
            </section>
        </main>
    </div>

    <!-- Modals (hidden by default) -->
    <!-- Add / Edit Game Modal -->
    <div id="modal-game" class="modal" aria-hidden="true">
        <div class="modal-content">
            <header class="modal-header">
                <h2 id="modal-game-title">Add / Edit Game</h2>
                <button class="modal-close" data-close>&times;</button>
            </header>
            <form id="form-game" class="modal-form">
                <label>Game Title<input type="text" name="name" required></label>
                <label>Description<textarea name="description"></textarea></label>
                <label>Cover Image URL<input type="url" name="cover_image_url"></label>
                <label>Trailer URL<input type="url" name="trailer_url"></label>
                <label><input type="checkbox" name="is_remake"> This is a remake</label>
                <label><input type="checkbox" name="is_remaster"> This is a remaster</label>
                <label>Tags (comma-separated)<input type="text" name="tags" placeholder="e.g., action, RPG, indie"></label>
                <div class="modal-actions">
                    <button type="submit" class="btn btn-primary">Save</button>
                    <button type="button" class="btn" data-close>Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Game to Platform Modal -->
    <div id="modal-add-to-platform" class="modal" aria-hidden="true">
        <div class="modal-content">
            <header class="modal-header">
                <h2>Add Game to Platform</h2>
                <button class="modal-close" data-close>&times;</button>
            </header>
            <form id="form-add-to-platform" class="modal-form">
                <label>Platform
                    <select name="platform_id" required>
                        <!-- JS will populate platform options -->
                    </select>
                </label>
                <fieldset>
                    <legend>Format</legend>
                    <label><input type="radio" name="is_digital" value="true" required> Digital</label>
                    <label><input type="radio" name="is_digital" value="false"> Physical</label>
                </fieldset>
                <label>Acquisition Method
                    <select name="acquisition_method">
                        <option value="">-- Select --</option>
                        <option value="bought">Bought</option>
                        <option value="free">Free</option>
                        <option value="bundle">Bundle</option>
                        <option value="gift">Gift</option>
                        <option value="subscription">Subscription</option>
                    </select>
                </label>
                <div class="modal-actions">
                    <button type="submit" class="btn btn-primary">Add</button>
                    <button type="button" class="btn" data-close>Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add / Edit Platform Modal -->
    <div id="modal-platform" class="modal" aria-hidden="true">
        <div class="modal-content">
            <header class="modal-header">
                <h2 id="modal-platform-title">Add / Edit Platform</h2>
                <button class="modal-close" data-close>&times;</button>
            </header>
            <form id="form-platform" class="modal-form">
                <label>Platform Name<input type="text" name="name" required></label>
                <fieldset>
                    <legend>Supported Formats</legend>
                    <label><input type="checkbox" name="supports_digital" checked> Digital</label>
                    <label><input type="checkbox" name="supports_physical"> Physical</label>
                </fieldset>
                <label>Description<textarea name="description"></textarea></label>
                <label>Icon URL<input type="url" name="icon_url"></label>
                <label>Image URL<input type="url" name="image_url"></label>
                <label>Year Acquired<input type="number" name="year_acquired" min="1980" max="2100"></label>
                <div class="modal-actions">
                    <button type="submit" class="btn btn-primary">Save</button>
                    <button type="button" class="btn" data-close>Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- CSV Import Modal -->
    <div id="modal-import" class="modal" aria-hidden="true">
        <div class="modal-content">
            <header class="modal-header">
                <h2>Import from CSV</h2>
                <button class="modal-close" data-close>&times;</button>
            </header>
            <div class="modal-body">
                <input id="csv-file-input" type="file" accept="text/csv" />
                <p class="muted">Upload a CSV file of games. You will be able to map columns before importing.</p>
                <textarea id="csv-preview" rows="8" placeholder="Preview / mapping will appear here" readonly></textarea>
                <div class="modal-actions">
                    <button id="btn-run-import" class="btn btn-primary">Run Import</button>
                    <button class="btn" data-close>Close</button>
                </div>
            </div>
        </div>
    </div>

    <script src="/js/app.js"></script>
</body>
</html>
